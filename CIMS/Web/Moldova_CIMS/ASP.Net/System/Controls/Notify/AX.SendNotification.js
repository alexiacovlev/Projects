AX.SendNotification=function(f,b,d,c){this.input=b;this.wnd=c;c.setHeader("Send notification to user(s)");f.html("<br /><label style='margin:10px;'>Type the message header and the text you want to send to the selected user(s):</label><input class='fm' style='margin:10px;width:96%;' value='Notification'/><textarea class='fm' style='height:80px;margin:10px;width:96%;'></textarea><div style='position:absolute;right:5px;bottom:5px;'><a id='btn1' class='fm-btn' style='font-weight:bold;margin-right:8px;width:100px;'>Send and Close</a><a id='btn2' class='fm-btn' style='width:60px;'>Close</a></div>");var e=$("label",f);var a=$("#btn1",f);this.$tb_hdr=$("input",f);this.$tb_msg=$("textarea",f);a.click($createDelegate(function(){var h=this.$tb_hdr.val().trim();var g=this.$tb_msg.val().trim();this.send(h,g)},this));$("#btn2",f).click(function(){c.close()});this.$tb_msg.focus()};AX.SendNotification.prototype={send:function(d,c){if(c==""){return}var b='{"input":"'+this.input+'","header":"'+jsonEncode(d)+'","text":"'+jsonEncode(c)+'"}';var a=App.SystemPath+"Controls/Notify/Service.asmx/Send";ExecuteService(b,a,$createDelegate(this.send_complete,this))},send_complete:function(a){window.setTimeout(function(){this.wnd.close()},500)}};