FM.NavUtils_OnCmdClick=function(a,d){var c=a.$cmdBar.attr("profile");var e=a.$cmdBar.attr("role");switch(d.attr("cmd")){case"role":new FM.NavRoleList(a,c,d);break;case"admin":var b=function(){a.Reload(true)};FM.ShowAdminWindow("ProfileBuilder",950,650,"p="+c+"/r="+e+"/f="+a.getSelected()+(a.selRole?("/sr="+a.selRole):""),b)}};FM.NavUtils_OnSplitterMouseDown=function(a,b){if(!a.splitter){a.splitter=new FM.SplitterBehavior(a.$left,a.$sp,a.$content)}a.splitter._onmousedown(b)};FM.SplitterBehavior=function(c,b,a){this.$left=c;this.$sp=b;this.$right=a;b.addHandler("mousedown",this._onmousedown,this)};FM.SplitterBehavior.prototype={_onmousedown:function(a){this._ismousedown=true;if(!this.$bg){this.$bg=$("<div style='position:absolute;z-index:5000;width:100%;height:100%;background-color:#797979;opacity:0.1;cursor:col-resize'></div>");document.body.appendChild(this.$bg[0]);this.$bg.addHandler("mousemove",this._onmousemove,this);this.$bg.addHandler("mouseup",this._onmouseup,this)}this.x=this.$right.position().left;this.pageX=a.pageX;this.$bg.css("display","block");if(!this._color){this._color=this.$sp.css("background-color")}this.$sp.css("background-color","#FFF")},_onmousemove:function(a){if(!this._ismousedown){return}this.x+=(a.pageX-this.pageX);this.pageX=a.pageX;this.$left.css("width",(this.x-3)+"px");this.$sp.css("left",(this.x-3)+"px");this.$right.css("left",(this.x)+"px")},_onmouseup:function(){this._ismousedown=false;this.$bg.css("display","none");this.$sp.css("background-color",this._color)}};FM.NavRoleList=function(a,b,c){this._profile=a;this.$btn=c;fmExecuteDataService("Navigator_GetRoles",'{"profileName":"'+b+'"}',$.proxy(this.init,this))};FM.NavRoleList.prototype={init:function(j){var b=j.d;_profile=this._profile;this.onselect=function(i){_profile.groupName=_profile.selRole=i;_profile.Reload()};var c="";var h;for(var a=0;a<b.length;a++){h=b[a];if(h.indexOf("*")==0){h=h.substr(1);c+="<a class='fm-o-a' value=\""+h+'" style="font-weight:bold;">'+b[a]+"</a>"}else{c+="<a class='fm-o-a' value=\""+h+'" style="font-weight:normal">'+h+"</a>"}}this.$_panel=$('<div style="background-color:#d6e5f6;z-index:10;" class="fm-popup"><div style="margin:2px;border:solid 1px #617583;background-color:#FFF;overflow:auto;">'+c+"</div>");this.$btn.parent().parent().append(this.$_panel[0]);var d=this.$btn.parent().position();var f=d.left-100;var e=d.top+20;var g=200;this.$_panel.css({left:f,top:e,width:g});if(b.length>25){this.$_panel.css("height",400).css("overflow-y","scroll")}this.$_panel.addHandler("mousedown",this.panel_click,this);this.$_panel.addHandler("blur",this.close,this);this.$_panel.fadeIn("fast").attr("tabIndex",-1).focus()},close:function(){this.$_panel.attr("tabIndex",-1);this.$_panel.remove()},panel_click:function(a){a.preventDefault();var b=a.target;if(b.tagName!="A"){return}var c=$(b).attr("value");this.onselect(c);this.close()}};