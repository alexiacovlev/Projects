// Process Builder Client Script Library
// Alfa-XP, Michael Isipciuc, 2016.
//
FMS.CreateUIActivity=function(b){var a=b.box;var c;switch(a.type){case"RecordState":case"Task":c=new FMS.StateActivity(a);break;case"MultiTask":c=new FMS.MultiTaskActivity(a);break;case"Start":c=new FMS.StartActivity(a);break;case"End":c=new FMS.EndActivity(a,FMS.Image.end,false);break;case"Exit":c=new FMS.EndActivity(a,FMS.Image.exit,true);break;case"IfElse":c=new FMS.IfElseActivity(a);break;case"SubProcess":c=new FMS.SubProcessActivity(a);break;case"Data":c=new FMS.ModuleActivity(a,FMS.Image.data);break;case"Module":c=new FMS.ModuleActivity(a,FMS.Image.module);break;case"SendMail":c=new FMS.ModuleActivity(a,FMS.Image.mail);break;case"StoredProcedure":c=new FMS.ModuleActivity(a,FMS.Image.sp);break;case"Link":c=new FMS.LinkActivity(a);break;default:c=new FMS.ModuleActivity(a,FMS.Image.module);break}b.ui=c;b.ports=c.ports;b.maxIn=c.maxIn;b.maxOut=c.maxOut};FMS.StateActivity=function(a){this.ports=FMS.ports_default;this.maxIn=9;this.maxOut=9;a.w=140;a.h=70;a.cx=70;a.cy=35;a.ui_ico=a.handler?a.handler.indexOf(":"):-1;this.draw=function(c,d,b){c.dropShadow("gray",5,3);c.drawImage(FMS.Image.state,d.x,d.y,140,70);c.dropShadow(null);if(d.ui_ico==8){c.drawImage(FMS.Image.ico_hw,d.x+2,d.y+52,16,16)}else{if(d.ui_ico==4){c.drawImage(FMS.Image.ico_frm,d.x+2,d.y+52,16,16)}}}};FMS.MultiTaskActivity=function(a){this.ports=FMS.ports_multi;this.maxIn=9;this.maxOut=9;a.w=152;a.h=82;a.cx=76;a.cy=41;a.ui_ico=a.handler?a.handler.indexOf(":"):-1;this.draw=function(c,d,b){c.dropShadow("gray",5,3);c.drawImage(FMS.Image.multitask,d.x,d.y,152,82);c.dropShadow(null);if(d.ui_ico==8){c.drawImage(FMS.Image.ico_hw,d.x+16,d.y+63,16,16)}else{if(d.ui_ico==4){c.drawImage(FMS.Image.ico_frm,d.x+16,d.y+63,16,16)}}}};FMS.SubProcessActivity=function(a){this.ports=FMS.ports_default;this.maxIn=9;this.maxOut=9;a.w=140;a.h=70;a.cx=70;a.cy=35;this.draw=function(c,d,b){c.dropShadow("gray",5,3);c.drawImage(FMS.Image.subprocess,d.x,d.y,140,70);c.dropShadow(null)}};FMS.DrawCircleActivity=function(d,g,b,a,h){var c=g.x;var e=g.y;var f=g.cx;d.beginPath();d.arc(c+f,e+f,f,0,2*Math.PI,false);d.closePath();d.fillGradient(c+f-10,e+f-30,c+f+20,e+f+5,b,a);d.strokeStyle=h;d.lineWidth=1;d.stroke()};FMS.StartActivity=function(a){this.ports=FMS.ports_circle;this.maxIn=0;this.maxOut=9;a.w=50;a.h=50;a.cx=25;a.cy=25;a.ui_ico=a.handler?a.handler.indexOf(":"):-1;this.draw=function(c,d,b){c.drawImage(FMS.Image.start,d.x,d.y,50,50);if(d.ui_ico==8){c.drawImage(FMS.Image.ico_hw,d.x+15,d.y+32,16,16)}else{if(d.ui_ico==4){c.drawImage(FMS.Image.ico_frm,d.x+15,d.y+32,16,16)}}}};FMS.EndActivity=function(b,a,c){this.ports=FMS.ports_circle;this.maxIn=9;this.maxOut=0;this.img=a;b.w=50;b.h=50;b.cx=25;b.cy=25;if(!c){b.text=""}this.draw=function(e,f,d){e.drawImage(this.img,f.x,f.y,50,50)}};FMS.ModuleActivity=function(b,a){this.ports=FMS.ports_circle;this.maxIn=9;this.maxOut=1;this.img=a;b.w=50;b.h=50;b.cx=25;b.cy=25;this.draw=function(d,e,c){d.drawImage(this.img,e.x,e.y,50,50)}};FMS.LinkActivity=function(b,a){this.ports=FMS.ports_link;this.maxIn=1;this.maxOut=1;this.img=a;b.w=40;b.h=40;b.cx=20;b.cy=20;this.draw=function(c,d){c.drawImage(FMS.Image.link,d.x,d.y,40,40)}};FMS.IfElseActivity=function(a){this.ports=FMS.ports_ifelse;this.maxIn=2;this.maxOut=2;a.w=72;a.h=56;a.cx=36;a.cy=28;this.draw=function(c,d,b){c.drawImage(FMS.Image.ifelse,d.x,d.y,72,56)}};FMS.Image=function(b){var a=new Image();a.src=b;return a};FMS.ports_default=[{x:35,y:0,i:0,pos:0},{x:70,y:0,i:1,pos:0},{x:105,y:0,i:2,pos:0},{x:140,y:18,i:3,pos:1},{x:140,y:35,i:4,pos:1},{x:140,y:53,i:5,pos:1},{x:105,y:70,i:6,pos:2},{x:70,y:70,i:7,pos:2},{x:35,y:70,i:8,pos:2},{x:0,y:53,i:9,pos:3},{x:0,y:35,i:10,pos:3},{x:0,y:18,i:11,pos:3}];FMS.ports_multi=[{x:30,y:0,i:0,pos:0},{x:70,y:0,i:1,pos:0},{x:115,y:0,i:2,pos:0},{x:152,y:28,i:3,pos:1},{x:152,y:45,i:4,pos:1},{x:152,y:63,i:5,pos:1},{x:120,y:82,i:6,pos:2},{x:85,y:82,i:7,pos:2},{x:50,y:82,i:8,pos:2},{x:0,y:53,i:9,pos:3},{x:0,y:35,i:10,pos:3},{x:0,y:18,i:11,pos:3}];FMS.ports_ifelse=[{x:36,y:0,i:0,pos:0},{x:72,y:28,i:1,pos:1},{x:36,y:56,i:2,pos:2},{x:0,y:28,i:3,pos:3}];FMS.ports_link=[{x:20,y:0,i:0,pos:0},{x:40,y:20,i:1,pos:1},{x:20,y:40,i:2,pos:2},{x:0,y:20,i:3,pos:3}];FMS.ports_circle=[{x:14,y:0,i:0,pos:0},{x:25,y:0,i:1,pos:0},{x:36,y:0,i:2,pos:0},{x:50,y:14,i:3,pos:1},{x:50,y:25,i:4,pos:1},{x:50,y:36,i:5,pos:1},{x:36,y:50,i:6,pos:2},{x:25,y:50,i:7,pos:2},{x:14,y:50,i:8,pos:2},{x:0,y:36,i:9,pos:3},{x:0,y:25,i:10,pos:3},{x:0,y:14,i:11,pos:3}];FMS.Image.state=FMS.Image("images/schema/state.png");FMS.Image.ifelse=FMS.Image("images/schema/decision.png");FMS.Image.subprocess=FMS.Image("images/schema/subprocess.png");FMS.Image.start=FMS.Image("images/schema/start.png");FMS.Image.end=FMS.Image("images/schema/end.png");FMS.Image.exit=FMS.Image("images/schema/exit.png");FMS.Image.multitask=FMS.Image("images/schema/multitask.png");FMS.Image.data=FMS.Image("images/schema/data.png");FMS.Image.module=FMS.Image("images/schema/module.png");FMS.Image.mail=FMS.Image("images/schema/mail.png");FMS.Image.sp=FMS.Image("images/schema/database.png");FMS.Image.link=FMS.Image("images/schema/link.png");FMS.Image.ico_clock=FMS.Image("images/schema/16_clock.png");FMS.Image.ico_action=FMS.Image("images/schema/action.png");FMS.Image.ico_hw=FMS.Image("images/schema/ico_16_hw.png");FMS.Image.ico_frm=FMS.Image("images/schema/ico_16_form.png");