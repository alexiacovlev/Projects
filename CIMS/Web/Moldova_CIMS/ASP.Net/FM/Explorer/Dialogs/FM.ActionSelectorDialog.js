FM.ActionSelectorDialog=function(){this._window=AX.Window.createPopupWindow("Action Handler Dialog",350,200,false,false);this._window.setBackground("#FFF");var a="<div style='padding:5px'>";a+="<div style='padding:3px;font-weight:bold'>Command:</div><div style='padding:5px;height:24px;width:200px'><select class='fm' id='itemCommand'><option value='FORM'>FORM</option><option value='WORKFLOW'>WORKFLOW</option><option value='PROFILE'>PROFILE</option><option value='STATEPROCESS'>STATEPROCESS</option><option value='URL'>Open URL</option><option value='SERVERCONTROL'>Custom Server Control</option><option value='CLIENTCONTROL'>JScript Control</option></select></div>";a+="<div id='itemValueText' style='padding:3px;font-weight:bold'></div>";a+="<div id='itemValuePanel'></div>";a+="<div id='itemAttrText' style='padding:3px;font-weight:bold;display:none'>Attributes:</div>";a+="<input id='itemAttr' class='fm' style='display:none'/>";a+="<a class='fm-btn' style='width:55px;position:absolute;right:5px;bottom:5px;'><img src='/ASP.Net/FM/Common/Images/ok.png'>OK</a>";a+="</div>";this.$p=$(a);this._window.$content.append(this.$p);this.$itemValueText=this.$p.find("#itemValueText");this.$itemValuePanel=this.$p.find("#itemValuePanel");this.$itemCommand=this.$p.find("#itemCommand");this.$itemCommand.addHandler("change",this.command_change,this);this.$p.find("a.fm-btn").addHandler("click",this.OK,this)};FM.ActionSelectorDialog.prototype={Show:function(d){this.control=d;this.parentTableLookup=d.parentControl;var a=this.control.getValue();var c="";value="";if(a!=""){var b=a.indexOf(":");if(b>0){c=a.substr(0,b);value=a.substr(b+1)}else{c="FORM";value=a}}else{c="FORM"}this.$itemCommand.val(c);this.command_change(null,value);this._window.show()},command_change:function(f,d,a){var g="<div style='padding:5px;height:24px;width:200px;' image='/ASP.Net/FM/Images/Explorer/ico_forms_views.png' filter='' wndSize='400,450'><div style='height:19px;position:relative;'><div style='left:0;top:0;right:23px;bottom:0;position:absolute;'><input class='fm'/></div><img style='right:0;position:absolute;' src='/ASP.Net/FM/Common/Images/btn_lookup_off.gif' /></div></div>";this.$itemValuePanel.children().hide();this.$itemValueText.text("");if(!d){d=""}if(!a){a=""}var c=this.$itemCommand.val();switch(c){case"FORM":this.$itemValueText.text("Select Form Name:");if(!this.formLookup){var b=$(g);this.$itemValuePanel.append(b);b.attr("type","FORM").attr("wndTitle","Select Form Name");this.formLookup=new FM.LookupTextControl(b,this.parentTableLookup);this.formLookup.$panel=b}this.formLookup.$panel.show();this.formLookup.setValue(d);break;case"WORKFLOW":this.$itemValueText.text("Select Workflow Name:");if(!this.workflowLookup){var b=$(g);this.$itemValuePanel.append(b);b.attr("type","WORKFLOW").attr("wndTitle","Select Workflow Name").attr("image","/ASP.Net/FM/Images/Explorer/ico_workflow.png");this.workflowLookup=new FM.LookupTextControl(b);this.workflowLookup.$panel=b}this.workflowLookup.$panel.show();this.workflowLookup.setValue(d);break;case"PROFILE":this.$itemValueText.text("Select Profile Name:");if(!this.profileLookup){var b=$(g);this.$itemValuePanel.append(b);b.attr("type","PROFILE").attr("wndTitle","Select Profile Name").attr("image","/ASP.Net/FM/Images/Explorer/ico_tree.png");this.profileLookup=new FM.LookupTextControl(b);this.profileLookup.$panel=b}this.profileLookup.$panel.show();this.profileLookup.setValue(d);break;default:if(c=="URL"){this.$itemValueText.text("Relative Form Url:")}else{this.$itemValueText.text("Settings:")}if(!this.$inputValue){this.$inputValue=$("<input class='fm' />");this.$itemValuePanel.append(this.$inputValue)}this.$inputValue.show().val(d);break}},OK:function(){var c=this.$itemCommand.val();var b="";var a="";switch(c){case"FORM":b=this.formLookup.getValue();break;case"WORKFLOW":b=this.workflowLookup.getValue();break;case"PROFILE":b=this.profileLookup.getValue();break;default:b=this.$inputValue.val().trim();break}if(b==""){h=""}else{h=c+":"+b}if(a!=""){h+="?"+a}this.control.setValue(h);this._window.close()}};