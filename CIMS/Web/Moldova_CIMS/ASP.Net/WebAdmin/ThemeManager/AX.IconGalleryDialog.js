AX.IconGalleryDialog=function(){this._window=AX.Window.createPopupWindow("Font Icon Gallery",580,440,false);this._window.setBackground("#999999");this._window.$content.append("<style>.ax-gal-a { width:40px;height:40px;background-color:#fff;color:#333;display:inline-block;margin:10px 10px 5px 10px;border-radius:3px;cursor:pointer;box-shadow: 0px 0px 5px #333; text-align:center;}.ax-gal-a:hover { background-color:#333; color:#FFF; }.ax-gal-a>.ax-ico { font-size:14pt; margin-top:10px; }</style>");this.panel=$("<div style='position:absolute;top:10px;left:10px;right:10px;bottom:60px;overflow-y:scroll;border:solid 1px #333;background-color:#FFF'></div>");this._window.$content.append(this.panel);this.$tb=$("<input class='fm' placeholder='quick filter by name: folder, user, data' style='position:absolute;bottom:15px;left:10px;width:560px'/>");this._window.$content.append(this.$tb);this.$tb.addHandler("keyup",this.onfilter,this);this.panel.addHandler("click",this.onclick,this);this.configPath="/Themes/_fonts/config.js";$.getJSON(this.configPath,$createDelegate(this.onLoadData,this));this._window.show();this.page=1;AX.IconGalleryDialog.Current=this};AX.IconGalleryDialog.Current=null;AX.IconGalleryDialog.prototype={Show:function(){this._window.show();if(this.$tb.val()!=""){this.$tb.focus().select()}},getValue:function(){return this.$input[0].value},onLoadData:function(a){this.imageList=a.glyphs;this.count=this.imageList.length;this.redraw(null)},redraw:function(e){var a=(e!=null&&e!="");var d="";for(var c=0;c<this.count;c++){var g=this.imageList[c];if(g.src=="custom_icons"&&!g.selected){continue}var b=g.css;if(a&&b.indexOf(e)==-1){continue}var f=(parseInt(g.code)).toString(16);d+="<a class='ax-gal-a' title=\""+b+" ("+f+")\" code='"+f+"'><i class='ax-ico'>&#x"+f+"</i></a>"}this.panel.html(d)},onfilter:function(b){var a=b.target.value;this.redraw(a)},onclick:function(b){var c=b.target;if(c.tagName=="I"){c=c.parentNode}if(c.tagName=="A"){var a=$(c).attr("code");if(this.onSelect){this.onSelect(a)}this._window.close()}}};