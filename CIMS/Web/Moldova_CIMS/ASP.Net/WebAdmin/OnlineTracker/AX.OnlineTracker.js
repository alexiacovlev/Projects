AX.OnlineTrackerIM=function(g,b,e,d){d.setHeader("Send Message to user(s)");var c=b.split("=")[1];this.wnd=d;g.html("<br /><label style='margin:10px;'>Type the text you want to send to online user(s):</label><textarea class='fm' style='height:80px;margin:10px;width:96%;'></textarea><div style='position:absolute;right:5px;bottom:5px;'><a id='btn1' class='fm-btn' style='font-weight:bold;margin-right:8px;width:100px;'>Send and Close</a><a id='btn2' class='fm-btn' style='width:60px;'>Close</a></div>");var f=$("label",g);var a=$("#btn1",g);this.$tb=$("textarea",g);this.$tb.keypress(function(h){if(h.keyCode==13){f.text("Sending ...");h.preventDefault();a.click()}});a.click($createDelegate(function(){var h=this.$tb.val().trim();if(h!=""){AX.OnlineTracker_send("SendMessage",'{"sessionIDs":"'+c+'","onlyMembers":true,"msg":"'+jsonEncode(h)+'"}',this)}},this));$("#btn2",g).click(function(){d.close()});this.$tb.focus()};AX.OnlineTracker_send=function(d,c,b){var a=App.SystemPath+"Admin/OnlineTracker/MessagingService.asmx/"+d;ExecuteService(c,a,$createDelegate(AX.OnlineTracker_send_complete,b))};AX.OnlineTracker_send_complete=function(a){var b=a.d;if(b!=""){alert(b)}else{window.setTimeout(function(){this.wnd.close()},500)}};AX.OnlineTrackerCommand=function(f,a,e,d,c){var b=a.split("=")[1];this.wnd=c;f.html("<br /><div style='margin:10px 20px 0 40px;font-size:11pt;'>Are you sure you want to "+d+"<br/>the user(s) you've selected ?</div><div style='position:absolute;right:5px;bottom:5px;'><a id='btn1' class='fm-btn' style='font-weight:bold;margin-right:8px;width:70px;'>Yes</a><a id='btn2' class='fm-btn' style='width:70px;'>No</a></div>");$("#btn1",f).click($createDelegate(function(){AX.OnlineTracker_send("SendCommand",'{"sessionIDs":"'+b+'","command":"'+e+'","onlyMembers":true}',this)},this));$("#btn2",f).click(function(){c.close()})};AX.OnlineTrackerLock=function(d,a,c,b){b.setHeader("Lock user(s)");AX.OnlineTrackerCommand(d,a,"LOCK","force block user interface for",b)};AX.OnlineTrackerLogout=function(d,a,c,b){b.setHeader("Logout user(s)");AX.OnlineTrackerCommand(d,a,"LOGOUT","force logout",b)};