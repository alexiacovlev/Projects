AX.ChartDesigner=function(a){AX.ChartDesigner.module=this;this.$p=a.$content;this._window=a;this.$p.find("#buttons").addHandler("click",this.btn_click,this)};AX.ChartDesigner.Open=function(a){AX.ChartDesigner.module.Load(a);AX.ChartDesigner.module._window.show()};AX.ChartDesigner.prototype={Load:function(a){this.chart=a;this._window.setHeader(a.name+" - Chart Designer");var b={dashboardName:this.chart.d,name:this.chart.name};ExecuteService(JSON.stringify(b),"/ASP.Net/Modules/AX.ChartDashboard/DesignerService.asmx/LoadInfo",$.proxy(this.onLoadInfo,this))},onLoadInfo:function(a){var b=a.d;if(b.Error!=null){AX.Window.alert("Load",b.Error);return}if(!b.Type){b.Type="BAR"}this.info=b;$("#tbTitle",this.$p).val(b.Title);$("#listType",this.$p).val(b.Type)},Save:function(a){this.closeOnClose=a;this.info.Title=$("#tbTitle",this.$p).val().trim();this.info.Type=$("#listType",this.$p).val();var b={dashboardName:this.chart.d,name:this.chart.name};b.info=this.info;ExecuteService(JSON.stringify(b),"/ASP.Net/Modules/AX.ChartDashboard/DesignerService.asmx/SaveInfo",$.proxy(this.onSaveInfo,this))},onSaveInfo:function(a){var b=a.d;if(b){AX.Window.alert("Save",b);return}if(this.closeOnClose){this._window.close()}this.chart.load()},btn_click:function(a){switch(_fm_getCommand(a)){case"save":this.Save(false);break;case"saveX":this.Save(true);break;case"close":this._window.close();break}}};